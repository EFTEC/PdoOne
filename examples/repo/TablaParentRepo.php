
<?php
/** @noinspection PhpUnused */

use eftec\PdoOne;
use eftec\_BasePdoOneRepo;

/**
 * Generated by PdoOne Version 1.33
 * @copyright (c) Jorge Castro C. MIT License  https://github.com/EFTEC/PdoOne
 * Class TablaparentRepo
 */
class TablaparentRepo extends _BasePdoOneRepo
{
    const TABLE = 'tablaparent';
    const PK = 'idtablaparent';
    const ME=__CLASS__;

    public static function getDef() {
        return [
            'idtablaparent' => 'int not null auto_increment',
            'field1' => 'varchar(50)',
            'idchild' => 'int',
            'idchild2' => 'int'
        ];
    }
    public static function getDefKey() {
        return [
            'idtablaparent' => 'PRIMARY KEY',
            'idchild' => 'KEY',
            'idchild2' => 'KEY'
        ];
    }
    public static function getDefFK($structure=false) {
        if ($structure) {
            return [
                'idchild' => 'FOREIGN KEY REFERENCES`tablachild`(`idtablachild`)',
                'idchild2' => 'FOREIGN KEY REFERENCES`tablachild`(`idtablachild`)'
            ];
        }
        /* key,refcol,reftable,extra */
        return [
            'idchild' => [
                'key' => 'FOREIGN KEY',
                'refcol' => 'idtablachild',
                'reftable' => 'tablachild',
                'extra' => 'FOREIGN KEY REFERENCES`tablachild`(`idtablachild`)'
            ],
            'idchild2' => [
                'key' => 'FOREIGN KEY',
                'refcol' => 'idtablachild',
                'reftable' => 'tablachild',
                'extra' => 'FOREIGN KEY REFERENCES`tablachild`(`idtablachild`)'
            ]
        ];
    }
    public static function factory() {
        $recursive=static::getRecursive();
        return [
            'idtablaparent'=>0,
            'field1'=>'',
            'idchild'=>0,
            'idchild.tablachild'=>(in_array('idchild',$recursive))
                ? tablachildRepo::factory()
                : null, /* manytoone */
            'idchild2'=>0,
            'idchild2.tablachild'=>(in_array('idchild2',$recursive))
                ? tablachildRepo::factory()
                : null, /* manytoone */
        ];
    }
    public static function factoryNull() {
        return [
            'idtablaparent'=>null,
            'field1'=>null,
            'idchild'=>null,
            'idchild2'=>null
        ];
    }

}